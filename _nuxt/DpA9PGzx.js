import{d as j,M as A,$ as D,H as P,b as g,o,c as w,t as z,i as h,C as E,F as H,r as L,a as R,Z as T,_ as J,N as Q,J as F,U as W,h as k,w as M,e as O,g as Z}from"./B2QG29PG.js";import{_ as G}from"./B3hfmSqP.js";import{_ as K}from"./BsJgsdEj.js";const X={key:0,class:"red-badge"},Y=j({__name:"SaleBadge",props:{node:{type:Object,required:!0}},setup(e){const{t:s}=A(),{storeSettings:c}=D(),l=P(()=>{var p,f,x,y;if(!((p=e.node)!=null&&p.rawSalePrice)||!((f=e.node)!=null&&f.rawRegularPrice))return"";const r=parseFloat((x=e.node)==null?void 0:x.rawSalePrice),m=parseFloat((y=e.node)==null?void 0:y.rawRegularPrice);return Math.round((r-m)/m*100)+" %"}),d=P(()=>e.node.rawSalePrice&&c.saleBadge!=="hidden"),_=P(()=>(c==null?void 0:c.saleBadge)==="percent"?l.value:s("messages.shop.onSale")?s("messages.shop.onSale"):"Sale");return(r,m)=>g(d)?(o(),w("span",X,z(g(_)),1)):h("",!0)}}),ee=Object.assign(E(Y,[["__scopeId","data-v-e0e8aa2a"]]),{__name:"SaleBadge"}),te={class:"inline-flex items-center"},ne={key:0,class:"text-xs ml-1 text-gray-500"},ae=j({__name:"StarRating",props:{rating:{type:Number,default:0},count:{type:Number,default:null},hideCount:{type:Boolean,default:!1},size:{type:Number,default:14}},setup(e){return(s,c)=>{const l=J;return o(),w("div",te,[(o(),w(H,null,L(5,d=>R(l,{key:d,name:"ion:star",size:e.size+"",class:"mr-[2px]",style:T({color:e.rating<d?"#ccc":"#FBBE24"})},null,8,["size","style"])),64)),e.count!==null&&!e.hideCount?(o(),w("span",ne,"("+z(e.count)+")",1)):h("",!0)])}}}),oe=Object.assign(ae,{__name:"StarRating"}),se={class:"relative group"},ce={class:"p-2"},le={class:"mb-2 font-light leading-tight group-hover:text-primary"},N=280,re=j({__name:"ProductCard",props:{node:{type:Object,required:!0},index:{type:Number,default:1}},setup(e){var f,x,y,U;const s=Q(),{storeSettings:c}=D(),l=e,d=Math.round(N*1.125),_=F((f=s.query)==null?void 0:f.filter),r=F(((U=(y=(x=_.value)==null?void 0:x.split("pa_color[")[1])==null?void 0:y.split("]")[0])==null?void 0:U.split(","))||[]);W(()=>s.query,()=>{var n,a,t;_.value=s.query.filter,r.value=((t=(a=(n=_.value)==null?void 0:n.split("pa_color[")[1])==null?void 0:a.split("]")[0])==null?void 0:t.split(","))||[]});const m=P(()=>{var n,a,t,u;return((a=(n=l.node)==null?void 0:n.image)==null?void 0:a.producCardSourceUrl)||((u=(t=l.node)==null?void 0:t.image)==null?void 0:u.sourceUrl)||"/images/placeholder.jpg"}),p=P(()=>{var n,a,t,u,v,C;if(r.value.length){const i=(a=(n=l.node)==null?void 0:n.variations)==null?void 0:a.nodes.filter(S=>{var I;const B=(I=S.attributes)==null?void 0:I.nodes.some(b=>r.value.some($=>{var q;return(q=b==null?void 0:b.value)==null?void 0:q.includes($)})),V=r.value.some(b=>{var $;return($=S.slug)==null?void 0:$.includes(b)});return B||V});if(i!=null&&i.length)return((u=(t=i[0])==null?void 0:t.image)==null?void 0:u.producCardSourceUrl)||((C=(v=i[0])==null?void 0:v.image)==null?void 0:C.sourceUrl)||m.value}return m.value});return(n,a)=>{const t=ee,u=G,v=Z,C=oe,i=K;return o(),w("div",se,[e.node.slug?(o(),k(v,{key:0,to:`/product/${decodeURIComponent(e.node.slug)}`,title:e.node.name},{default:M(()=>{var S,B;return[R(t,{node:e.node,class:"absolute top-2 right-2"},null,8,["node"]),g(p)?(o(),k(u,{key:0,width:N,height:g(d),src:g(p),alt:((S=e.node.image)==null?void 0:S.altText)||e.node.name||"Product image",title:((B=e.node.image)==null?void 0:B.title)||e.node.name,loading:e.index<=3?"eager":"lazy",sizes:`sm:${N/2}px md:${N}px`,class:"rounded-lg object-top object-cover w-full aspect-9/8",placeholder:"","placeholder-class":"blur-xl"},null,8,["height","src","alt","title","loading","sizes"])):h("",!0)]}),_:1},8,["to","title"])):h("",!0),O("div",ce,[g(c).showReviews?(o(),k(C,{key:0,rating:e.node.averageRating,count:e.node.reviewCount},null,8,["rating","count"])):h("",!0),e.node.slug?(o(),k(v,{key:1,to:`/product/${decodeURIComponent(e.node.slug)}`,title:e.node.name},{default:M(()=>[O("h2",le,z(e.node.name),1)]),_:1},8,["to","title"])):h("",!0),R(i,{class:"text-sm","sale-price":e.node.salePrice,"regular-price":e.node.regularPrice},null,8,["sale-price","regular-price"])])])}}}),me=Object.assign(re,{__name:"ProductCard"});export{ee as _,oe as a,me as b};
