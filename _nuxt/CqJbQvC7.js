import{_ as q}from"./BG7lbux0.js";import{d as F,u as B,x as N,H as v,J as E,U,o as w,c as C,e as y,a as x,b as n,A as Y,B as G,K as H,_ as z,C as R,V as K,W as J,X as O,Y as X,D as W,L as Z,Z as ee,i as I,$ as te,h as ne,w as P,f as oe,t as D,g as se}from"./Dewv5x70.js";import{_ as ae}from"./BDmP7TTW.js";import{u as re}from"./-iaB0e15.js";const ie={class:"flex rounded bg-white text-sm leading-none shadow-sm shadow-gray-200 isolate"},le=["disabled"],ce=["max"],ue=["disabled"],de=F({__name:"QuantityInput",props:{item:{type:Object,required:!0}},setup(e){const{updateItemQuantity:i,isUpdatingCart:l,cart:d}=B(),{debounce:f}=N(),t=v(()=>{var u,s;return e.item.variation?(u=e.item.variation)==null?void 0:u.node:(s=e.item.product)==null?void 0:s.node}),o=E(e.item.quantity),h=v(()=>t.value.stockQuantity?t.value.stockQuantity<=o.value:!1),_=()=>o.value++,m=()=>o.value--;U(o,f(()=>{o.value!==""&&i(e.item.key,o.value)},250));const c=()=>{var u,s,p;if(o.value===""){const r=(p=(s=(u=d.value)==null?void 0:u.contents)==null?void 0:s.nodes)==null?void 0:p.find(g=>g.key===e.item.key);r&&(o.value=r.quantity)}};return(u,s)=>{const p=z;return w(),C("div",ie,[y("button",{title:"Decrease Quantity","aria-label":"Decrease Quantity",onClick:m,type:"button",class:"focus:outline-none border-r w-6 h-6 border rounded-l border-gray-300 hover:bg-gray-50 disabled:cursor-not-allowed",disabled:n(l)||n(o)<=0},[x(p,{name:"ion:remove",size:"14"})],8,le),Y(y("input",{"onUpdate:modelValue":s[0]||(s[0]=r=>H(o)?o.value=r:null),type:"number",min:"0",max:n(t).stockQuantity,"aria-label":"Quantity",onFocusout:c,class:"flex items-center justify-center w-8 px-2 text-right text-xs focus:outline-none border-y border-gray-300"},null,40,ce),[[G,n(o),void 0,{number:!0}]]),y("button",{title:"Increase Quantity","aria-label":"Increase Quantity",onClick:_,type:"button",class:"focus:outline-none border-l w-6 h-6 border rounded-r hover:bg-gray-50 border-gray-300 disabled:cursor-not-allowed disabled:bg-gray-100",disabled:n(l)||n(h)},[x(p,{name:"ion:add",size:"14"})],8,ue)])}}}),me=Object.assign(R(de,[["__scopeId","data-v-56ab9f24"]]),{__name:"QuantityInput"}),pe={},fe={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 512 512"};function he(e,i){return w(),C("svg",fe,i[0]||(i[0]=[y("path",{d:"M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),y("path",{stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32",d:"M80 112h352"},null,-1),y("path",{d:"M192 112V72h0a23.93 23.93 0 0124-24h80a23.93 23.93 0 0124 24h0v40M256 176v224M184 176l8 224M328 176l-8 224",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}const ve=Object.assign(R(pe,[["render",he]]),{__name:"TrashIcon"});function _e(e){return K()?(J(e),!0):!1}const ye=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ge=Object.prototype.toString,xe=e=>ge.call(e)==="[object Object]",be=()=>{};function V(e){return Array.isArray(e)?e:[e]}const we=ye?window:void 0;function ke(e){var i;const l=X(e);return(i=l==null?void 0:l.$el)!=null?i:l}function L(...e){let i,l,d,f;if(typeof e[0]=="string"||Array.isArray(e[0])?([l,d,f]=e,i=we):[i,l,d,f]=e,!i)return be;l=V(l),d=V(d);const t=[],o=()=>{t.forEach(c=>c()),t.length=0},h=(c,u,s,p)=>(c.addEventListener(u,s,p),()=>c.removeEventListener(u,s,p)),_=U(()=>[ke(i),X(f)],([c,u])=>{if(o(),!c)return;const s=xe(u)?{...u}:u;t.push(...l.flatMap(p=>d.map(r=>h(c,p,r,s))))},{immediate:!0,flush:"post"}),m=()=>{_(),o()};return _e(m),m}function Se(e,i={}){const{threshold:l=50,onSwipe:d,onSwipeEnd:f,onSwipeStart:t,passive:o=!0}=i,h=O({x:0,y:0}),_=O({x:0,y:0}),m=v(()=>h.x-_.x),c=v(()=>h.y-_.y),{max:u,abs:s}=Math,p=v(()=>u(s(m.value),s(c.value))>=l),r=E(!1),g=v(()=>p.value?s(m.value)>s(c.value)?m.value>0?"left":"right":c.value>0?"up":"down":"none"),k=a=>[a.touches[0].clientX,a.touches[0].clientY],Q=(a,b)=>{h.x=a,h.y=b},$=(a,b)=>{_.x=a,_.y=b},S={passive:o,capture:!o},T=a=>{r.value&&(f==null||f(a,g.value)),r.value=!1},j=[L(e,"touchstart",a=>{if(a.touches.length!==1)return;const[b,M]=k(a);Q(b,M),$(b,M),t==null||t(a)},S),L(e,"touchmove",a=>{if(a.touches.length!==1)return;const[b,M]=k(a);$(b,M),S.capture&&!S.passive&&Math.abs(m.value)>Math.abs(c.value)&&a.preventDefault(),!r.value&&p.value&&(r.value=!0),r.value&&(d==null||d(a))},S),L(e,["touchend","touchcancel"],T,S)];return{isSwiping:r,direction:g,coordsStart:h,coordsEnd:_,lengthX:m,lengthY:c,stop:()=>j.forEach(a=>a()),isPassiveEventSupported:!0}}const Ce={key:0,class:"rounded-lg flex h-16 w-full overflow-hidden relative items-center"},Ie={__name:"SwipeCard",emits:["remove"],setup(e,{emit:i}){const l=i,d=E(!0),f=E(null),{isSwiping:t,lengthX:o}=Se(f,{passive:!0,onSwipeEnd(){o.value>80&&(d.value=!1,l("remove"))}});return(h,_)=>{const m=ve;return n(d)?(w(),C("div",Ce,[x(m,{class:W(["transform transition-all right-0 w-6 scale-0 absolute",{"scale-100":n(o)>40,"delete-ready":n(o)>80}])},null,8,["class"]),y("div",{class:W(["rounded-lg inset-0 absolute",{"transition-all":!n(t)}]),ref_key:"el",ref:f,style:ee({transform:n(t)?`translateX(-${n(o)}px)`:"none"})},[Z(h.$slots,"default")],6)])):I("",!0)}}},Qe={key:0,class:"flex items-center gap-3 group"},$e={class:"flex-1"},Me={class:"flex gap-x-2 gap-y-1 flex-wrap items-center"},Ee={key:0,class:"text-[10px] border-green-200 leading-none bg-green-100 inline-block p-0.5 rounded text-green-600 border"},Te={key:1,class:"text-[10px] border-yellow-200 leading-none bg-yellow-100 inline-block p-0.5 rounded text-orange-500 border"},je={class:"inline-flex gap-2 flex-col items-end"},Ae={class:"text-xs text-gray-400 group-hover:text-gray-700 flex leading-none items-center"},De={__name:"CartCard",props:{item:{type:Object,required:!0}},setup(e){const{updateItemQuantity:i}=B(),{addToWishlist:l}=re(),{FALLBACK_IMG:d}=N(),{storeSettings:f}=te(),t=v(()=>{var r,g;return e.item.variation?(r=e.item.variation)==null?void 0:r.node:(g=e.item.product)==null?void 0:g.node}),o=v(()=>`/product/${decodeURIComponent(e.item.product.node.slug)}`),h=v(()=>t.value.stockQuantity?t.value.lowStockAmount>=t.value.stockQuantity:!1),_=v(()=>{var r,g,k;return((r=t.value.image)==null?void 0:r.cartSourceUrl)||((g=t.value.image)==null?void 0:g.sourceUrl)||((k=e.item.product.image)==null?void 0:k.sourceUrl)||d}),m=v(()=>parseFloat(t.value.rawRegularPrice)),c=v(()=>parseFloat(t.value.rawSalePrice)),u=v(()=>Math.round((m.value-c.value)/m.value*100)+"%"),s=()=>{i(e.item.key,0)},p=()=>{l(e.item.product.node),s()};return(r,g)=>{const k=q,Q=se,$=ae,S=me,T=z,j=Ie;return w(),ne(j,{onRemove:s},{default:P(()=>[n(t)?(w(),C("div",Qe,[x(Q,{to:n(o)},{default:P(()=>{var A,a;return[x(k,{width:"64",height:"64",class:"w-16 h-16 rounded-md skeleton",src:n(_),alt:((A=n(t).image)==null?void 0:A.altText)||n(t).name,title:((a=n(t).image)==null?void 0:a.title)||n(t).name,loading:"lazy"},null,8,["src","alt","title"])]}),_:1},8,["to"]),y("div",$e,[y("div",Me,[x(Q,{class:"leading-tight",to:n(o)},{default:P(()=>[oe(D(n(t).name),1)]),_:1},8,["to"]),n(t).salePrice?(w(),C("span",Ee," Save "+D(n(u)),1)):I("",!0),n(h)?(w(),C("span",Te," Low Stock ")):I("",!0)]),x($,{class:"mt-1 text-xs","sale-price":n(t).salePrice,"regular-price":n(t).regularPrice},null,8,["sale-price","regular-price"])]),y("div",je,[x(S,{item:e.item},null,8,["item"]),y("div",Ae,[n(f).showMoveToWishlist?(w(),C("button",{key:0,class:"mr-2 pr-2 border-r",onClick:p,type:"button"},"Move to Wishlist")):I("",!0),y("button",{title:"Remove Item","aria-label":"Remove Item",onClick:s,type:"button",class:"flex items-center gap-1 hover:text-red-500 cursor-pointer"},[x(T,{name:"ion:trash",class:"hidden md:inline-block",size:"12"})])])])])):I("",!0)]),_:1})}}};export{ve as _,De as a};
